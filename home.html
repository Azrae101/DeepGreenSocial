<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Green & social - Sustainable Living Platform</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <style>
        /* Global Styles */
        :root {
            --primary-green: #2e7d32;
            --light-green: #4caf50;
            --dark-green: #1b5e20;
            --accent-color: #ff9800;
            --light-gray: #f5f5f5;
            --dark-gray: #424242;
            --white: #ffffff;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background-color: var(--light-gray);
            color: var(--dark-gray);
            line-height: 1.6;
        }

        .container {
            width: 100%;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* Header Styles */
        header {
            background-color: var(--white);
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .header-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px 0;
        }

        .logo {
            display: flex;
            align-items: center;
        }

        .logo h1 {
            color: var(--primary-green);
            font-size: 24px;
            margin-left: 10px;
        }

        .logo-icon {
            font-size: 28px;
            color: var(--primary-green);
        }

        nav ul {
            display: flex;
            list-style: none;
        }

        nav ul li {
            margin-left: 20px;
        }

        nav ul li a {
            text-decoration: none;
            color: var(--dark-gray);
            font-weight: 500;
            padding: 8px 12px;
            border-radius: 4px;
            transition: all 0.3s ease;
        }

        nav ul li a:hover {
            background-color: var(--light-green);
            color: var(--white);
        }

        .auth-buttons {
            display: flex;
            gap: 10px;
        }

        .btn {
            padding: 8px 16px;
            border-radius: 4px;
            text-decoration: none;
            font-weight: 500;
            transition: all 0.3s ease;
            cursor: pointer;
            border: none;
        }

        .btn-login {
            background-color: transparent;
            color: var(--primary-green);
            border: 1px solid var(--primary-green);
        }

        .btn-register {
            background-color: var(--primary-green);
            color: var(--white);
        }

        .btn:hover {
            opacity: 0.9;
            transform: translateY(-2px);
        }

        /* Hero Section */
        .hero {
            background: linear-gradient(rgba(46, 125, 50, 0.8), rgba(46, 125, 50, 0.9)), url('https://images.unsplash.com/photo-1542601906990-b4d3fb778b09?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=2074&q=80');
            background-size: cover;
            background-position: center;
            color: var(--white);
            padding: 80px 0;
            text-align: center;
        }

        .hero h2 {
            font-size: 2.5rem;
            margin-bottom: 20px;
        }

        .hero p {
            font-size: 1.2rem;
            max-width: 700px;
            margin: 0 auto 30px;
        }

        .btn-hero {
            background-color: var(--accent-color);
            color: var(--white);
            padding: 12px 24px;
            font-size: 1.1rem;
        }

        /* Section Styles */
        section {
            padding: 60px 0;
        }

        .section-title {
            text-align: center;
            margin-bottom: 40px;
            color: var(--primary-green);
        }

        .section-title h2 {
            font-size: 2rem;
            margin-bottom: 10px;
        }

        .section-title p {
            color: var(--dark-gray);
            max-width: 700px;
            margin: 0 auto;
        }

        /* Features Grid */
        .features-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
            margin-top: 40px;
        }

        .feature-card {
            background-color: var(--white);
            border-radius: 8px;
            padding: 30px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s ease;
        }

        .feature-card:hover {
            transform: translateY(-10px);
        }

        .feature-icon {
            font-size: 40px;
            color: var(--primary-green);
            margin-bottom: 20px;
        }

        .feature-card h3 {
            margin-bottom: 15px;
            color: var(--dark-green);
        }

        /* Events Section */
        .events-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 25px;
        }

        .event-card {
            background-color: var(--white);
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }

        .event-image {
            height: 200px;
            background-size: cover;
            background-position: center;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--white);
            font-size: 1.5rem;
            position: relative;
        }

        .event-image::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.3);
        }

        .event-image span {
            z-index: 1;
            font-weight: bold;
            text-shadow: 1px 1px 3px rgba(0,0,0,0.7);
        }

        .event-details {
            padding: 20px;
        }

        .event-date {
            display: inline-block;
            background-color: var(--light-green);
            color: var(--white);
            padding: 5px 10px;
            border-radius: 4px;
            margin-bottom: 10px;
            font-size: 0.9rem;
        }

        .event-card h3 {
            margin-bottom: 10px;
            color: var(--dark-green);
        }

        .event-card p {
            margin-bottom: 15px;
            color: var(--dark-gray);
        }

        .event-signup-info {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            font-size: 0.9rem;
        }

        .event-participants {
            color: var(--dark-gray);
        }

        .event-points {
            color: var(--primary-green);
            font-weight: 500;
        }

        .btn-event {
            background-color: var(--primary-green);
            color: var(--white);
            padding: 8px 16px;
            font-size: 0.9rem;
        }

        .events-disclaimer {
            text-align: center;
            margin-top: 20px;
            font-style: italic;
            color: var(--dark-gray);
            font-size: 0.9rem;
        }

        /* News Section */
        .news-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 25px;
        }

        .news-card {
            background-color: var(--white);
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }

        .news-image {
            height: 200px;
            background-size: cover;
            background-position: center;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--white);
            position: relative;
        }

        .news-image::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.3);
        }

        .news-content {
            padding: 20px;
        }

        .news-date {
            color: var(--dark-gray);
            font-size: 0.9rem;
            margin-bottom: 10px;
        }

        .news-card h3 {
            margin-bottom: 10px;
            color: var(--dark-green);
        }

        .news-card p {
            margin-bottom: 15px;
            color: var(--dark-gray);
        }

        .btn-news {
            background-color: var(--primary-green);
            color: var(--white);
            padding: 8px 16px;
            font-size: 0.9rem;
        }

        /* Points System Section */
        .points-system {
            background-color: var(--white);
            border-radius: 8px;
            padding: 40px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            margin-top: 40px;
        }

        .points-system h3 {
            color: var(--dark-green);
            margin-bottom: 20px;
            text-align: center;
        }

        .points-benefits {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }

        .benefit-item {
            text-align: center;
            padding: 20px;
            border-radius: 8px;
            background-color: var(--light-gray);
        }

        .benefit-icon {
            font-size: 2rem;
            margin-bottom: 15px;
            color: var(--primary-green);
        }

        /* Statistics Section */
        .game-stats {
            display: flex;
            justify-content: space-around;
            margin-bottom: 20px;
        }

        .stat-item {
            text-align: center;
        }

        .stat-value {
            font-size: 2rem;
            font-weight: bold;
            color: var(--primary-green);
        }

        .stat-label {
            font-size: 0.9rem;
            color: var(--dark-gray);
        }

        /* Footer */
        footer {
            background-color: var(--dark-green);
            color: var(--white);
            padding: 40px 0 20px;
        }

        .footer-content {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 30px;
            margin-bottom: 30px;
        }

        .footer-column h3 {
            margin-bottom: 20px;
            font-size: 1.2rem;
        }

        .footer-column ul {
            list-style: none;
        }

        .footer-column ul li {
            margin-bottom: 10px;
        }

        .footer-column ul li a {
            color: var(--light-gray);
            text-decoration: none;
            transition: color 0.3s ease;
        }

        .footer-column ul li a:hover {
            color: var(--accent-color);
        }

        .social-links {
            display: flex;
            gap: 15px;
            margin-top: 15px;
        }

        .social-icon {
            display: inline-block;
            width: 40px;
            height: 40px;
            background-color: var(--light-green);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--white);
            text-decoration: none;
            transition: background-color 0.3s ease;
        }

        .social-icon:hover {
            background-color: var(--accent-color);
        }

        .copyright {
            text-align: center;
            padding-top: 20px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            font-size: 0.9rem;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .header-container {
                flex-direction: column;
                padding: 15px 0;
            }

            nav ul {
                margin: 15px 0;
            }

            .auth-buttons {
                margin-top: 10px;
            }

            .hero h2 {
                font-size: 2rem;
            }

            .hero p {
                font-size: 1rem;
            }
            
            .game-stats {
                flex-direction: column;
                gap: 20px;
            }
        }

        .btn-cancel {
            background-color: #dc3545 !important;
            color: white;
        }
        
        .btn-cancel:hover {
            background-color: #c82333 !important;
        }
        
        .event-address {
            margin-bottom: 15px;
            color: var(--dark-gray);
            font-size: 0.9rem;
        }

    /* Map Section Styles */
    .map-container {
        display: flex;
        flex-direction: column;
        gap: 30px;
    }

    #map {
        height: 500px;
        width: 100%;
        border-radius: 8px;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
    }

    .map-legend {
        display: flex;
        flex-wrap: wrap;
        gap: 20px;
        justify-content: center;
        margin-top: 20px;
    }

    .legend-item {
        display: flex;
        align-items: center;
        gap: 8px;
    }

    .legend-color {
        width: 20px;
        height: 20px;
        border-radius: 50%;
    }

    .locations-list {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
        gap: 25px;
        margin-top: 30px;
    }

    .location-card {
        background-color: var(--white);
        border-radius: 8px;
        padding: 20px;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        transition: transform 0.3s ease;
    }

    .location-card:hover {
        transform: translateY(-5px);
    }

    .location-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 15px;
    }

    .location-type {
        display: inline-block;
        padding: 5px 10px;
        border-radius: 20px;
        font-size: 0.8rem;
        font-weight: bold;
        text-transform: uppercase;
    }

    .type-flea-market {
        background-color: #e8f5e9;
        color: var(--primary-green);
    }

    .type-secondhand {
        background-color: #e3f2fd;
        color: #1565c0;
    }

    .type-community {
        background-color: #fff3e0;
        color: #ef6c00;
    }

    .type-red-cross {
        background-color: #ffebee;
        color: #c62828;
    }

    .location-name {
        color: var(--dark-green);
        margin-bottom: 10px;
    }

    .location-details {
        margin-bottom: 15px;
    }

    .location-detail {
        display: flex;
        align-items: center;
        gap: 8px;
        margin-bottom: 8px;
    }

    .detail-icon {
        color: var(--primary-green);
        width: 20px;
    }

    .btn-location {
        background-color: var(--primary-green);
        color: var(--white);
        padding: 8px 16px;
        font-size: 0.9rem;
        width: 100%;
        margin-top: 10px;
    }

    @media (max-width: 768px) {
        #map {
            height: 400px;
        }
        
        .locations-list {
            grid-template-columns: 1fr;
        }
    }
    </style>
</head>
<body>
    <!-- Header -->
    <header>
        <div class="container header-container">
            <div class="logo">
                <span class="logo-icon">üå±</span>
                <h1>Green & Social</h1>
            </div>
            <nav>
                <ul>
                    <li><a href="#home">Home</a></li>
                    <li><a href="#events">Events</a></li>
                    <li><a href="#map">Secondhand Stores</a></li>
                    <li><a href="game.html">Games</a></li>
                </ul>
            </nav>
            <div class="auth-buttons" id="authButtons">
                <!-- Buttons will be dynamically inserted here -->
            </div>

            <script>
                // Update auth buttons based on login status
                function updateAuthButtons() {
                    const authButtons = document.getElementById('authButtons');
                    const currentUser = JSON.parse(localStorage.getItem('sustainalearn_currentUser'));
                    
                    if (currentUser) {
                        // User is logged in
                        authButtons.innerHTML = `
                            <span style="margin-right: 15px; color: var(--primary-green);">Welcome, ${currentUser.firstName}</span>
                            <a href="points.html" class="btn btn-login">My Points</a>
                            <button class="btn btn-register" id="logoutBtn">Logout</button>
                        `;
                        
                        document.getElementById('logoutBtn').addEventListener('click', function() {
                            localStorage.removeItem('sustainalearn_currentUser');
                            window.location.reload();
                        });
                    } else {
                        // User is not logged in
                        authButtons.innerHTML = `
                            <button class="btn btn-login" id="loginBtn">Login</button>
                            <button class="btn btn-register" id="registerBtn">Register</button>
                        `;
                        
                        document.getElementById('loginBtn').addEventListener('click', function() {
                            window.location.href = 'login.html';
                        });
                        
                        document.getElementById('registerBtn').addEventListener('click', function() {
                            window.location.href = 'register.html';
                        });
                    }
                }
                
                // Initialize auth buttons on page load
                document.addEventListener('DOMContentLoaded', updateAuthButtons);
            </script>
        </div>
    </header>

    <!-- Hero Section -->
    <section class="hero" id="home">
        <div class="container">
            <h2>Lighten Your Impact, Enrich Our Planet</h2>
            <p>Join the movement of conscious citizens who learn, act, and connect to create a sustainable future through education, community events, and interactive games.</p>
        </div>
    </section>

    <!-- Features Section -->
    <section>
        <div class="container">
            <div class="section-title">
                <h2>Our Mission</h2>
                <p>Solving the lack of awareness and education about sustainability for people who want to make a difference but don't know how.</p>
            </div>
            <div class="features-grid">
                <div class="feature-card">
                    <div class="feature-icon">üéØ</div>
                    <h3>Our Target</h3>
                    <p>We focus on Aarhus residents between 18 and 30 years old who feel helpless about helping the environment but are willing to be social and make a difference.</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">üí°</div>
                    <h3>Our Solution</h3>
                    <p>We provide a digital platform with social events, educational games, and engaging content focused on sustainability to make learning fun and actionable.</p>
                </div>
                <div class="feature-card">
                    <div class="feature-icon">üåç</div>
                    <h3>Our Impact</h3>
                    <p>We help people learn about sustainability, feel responsible for our planet, and take easy actions to create a healthier future for all.</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Points System Section -->
    <section>
        <div class="container">
            <div class="section-title">
                <h2>Earn Points, Make a Difference</h2>
                <p>Our rewards system helps you track your impact and redeem points for exciting benefits</p>
            </div>
            <div class="points-system">
                <h3>How Our Points System Works</h3>
                <p>Every sustainable action you take earns you points that can be redeemed for rewards from our partners and sponsors. The more you participate, the more you earn!</p>
                
                <div class="points-benefits">
                    <div class="benefit-item">
                        <div class="benefit-icon">üèÜ</div>
                        <h4>Earn Points</h4>
                        <p>Participate in events, complete games, and engage with our content to accumulate points.</p>
                    </div>
                    <div class="benefit-item">
                        <div class="benefit-icon">üõçÔ∏è</div>
                        <h4>Redeem Rewards</h4>
                        <p>Use your points for gift cards, vouchers, and special offers from our sustainability-focused partners.</p>
                    </div>
                    <div class="benefit-item">
                        <div class="benefit-icon">ü§ù</div>
                        <h4>Support Sponsors</h4>
                        <p>Our sponsors are eco-conscious businesses that support our mission. Your rewards help sustain their green initiatives too.</p>
                    </div>
                </div>
                
                <p style="text-align: center; margin-top: 20px; font-style: italic;">
                    <strong>Note:</strong> We're currently building partnerships with local and national sustainable businesses. Soon you'll be able to redeem points for exciting rewards!
                </p>
            </div>
        </div>
    </section>

    <!-- Events Section -->
    <section id="events">
        <div class="container">
            <div class="section-title">
                <h2>Upcoming Events</h2>
                <p>Join our community events focused on sustainability, learning, and socializing.</p>
            </div>
            <div class="events-container">
                <div class="event-card">
                    <div class="event-image" style="background-image: url('https://images.unsplash.com/photo-1416879595882-3373a0480b5b?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=2070&q=80')">
                        <span>Community Gardening</span>
                    </div>
                    <div class="event-details">
                        <span class="event-date">June 15, 2023</span>
                        <h3>Community Gardening Workshop</h3>
                        <p>Learn how to grow your own food and create a sustainable garden in your backyard or balcony.</p>
                        <div class="event-signup-info">
                            <div class="event-participants" id="gardening-participants">12 people signed up</div>
                            <div class="event-points">+100 points upon completion</div>
                        </div>
                        <button class="btn btn-event event-signup-btn" data-event="gardening">Sign Up - Free</button>
                    </div>
                </div>
                <div class="event-card">
                    <div class="event-image" style="background-image: url('https://images.unsplash.com/photo-1556909114-f6e7ad7d3136?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=2070&q=80')">
                        <span>Sustainable Cooking</span>
                    </div>
                    <div class="event-details">
                        <span class="event-date">June 22, 2023</span>
                        <h3>Sustainable Cooking Class</h3>
                        <p>Discover how to prepare delicious meals using seasonal, local ingredients with minimal waste.</p>
                        <div class="event-signup-info">
                            <div class="event-participants" id="cooking-participants">8 people signed up</div>
                            <div class="event-points">+100 points upon completion</div>
                        </div>
                        <button class="btn btn-event event-signup-btn" data-event="cooking">Sign Up - Free</button>
                    </div>
                </div>
                <div class="event-card">
                    <div class="event-image" style="background-image: url('https://images.unsplash.com/photo-1532996122724-e3c354a0b15b?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=2070&q=80')">
                        <span>Beach Cleanup</span>
                    </div>
                    <div class="event-details">
                        <span class="event-date">June 29, 2023</span>
                        <h3>Beach Cleanup & Awareness</h3>
                        <p>Join us for a beach cleanup followed by a discussion on ocean conservation and plastic pollution.</p>
                        <div class="event-signup-info">
                            <div class="event-participants" id="beach-cleanup-participants">15 people signed up</div>
                            <div class="event-points">+100 points upon completion</div>
                        </div>
                        <button class="btn btn-event event-signup-btn" data-event="beach-cleanup">Sign Up - Free</button>
                    </div>
                </div>
            </div>
            <div class="events-disclaimer">
                <p>Note: These are not real events, but just placeholders for ideation and demonstration purposes.</p>
            </div>
        </div>
    </section>

    <!-- News Section -->
    <section id="news">
        <div class="container">
            <div class="section-title">
                <h2>Sustainability News</h2>
                <p>Stay updated with the latest news, tips, and innovations in sustainability.</p>
            </div>
            <div class="news-container">
                <div class="news-card">
                    <div class="news-image">
                        <img src="plastic.jpg" alt="Plastic waste reduction tips" style="width: 100%; height: 100%; object-fit: cover;">
                    </div>                    
                        <div class="news-content">
                        <div class="news-date">November 5, 2025</div>
                        <h3>5 Simple Ways to Reduce Plastic Waste</h3>
                        <p>Discover easy-to-implement strategies to minimize your plastic footprint and contribute to a cleaner planet.</p>
                        <a href="article1.html" class="btn btn-news">Read More</a>
                    </div>
                </div>
                <div class="news-card">
                    <div class="news-image" style="background-image: url('https://images.unsplash.com/photo-1542601906990-b4d3fb778b09?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=2074&q=80')"></div>
                    <div class="news-content">
                        <div class="news-date">October 28, 2025</div>
                        <h3>Local Community Reduces Carbon Footprint by 15%</h3>
                        <p>Learn how a neighborhood in Aarhus implemented community-wide sustainability initiatives with impressive results.</p>
                        <a href="article2.html" class="btn btn-news">Read More</a>
                    </div>
                </div>
                <div class="news-card">
                    <div class="news-image" style="background-image: url('https://images.unsplash.com/photo-1441986300917-64674bd600d8?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=2070&q=80')"></div>
                    <div class="news-content">
                        <div class="news-date">October 20, 2025</div>
                        <h3>The Future of Sustainable Fashion</h3>
                        <p>Explore how innovative materials and circular economy models are transforming the fashion industry.</p>
                        <a href="article3.html" class="btn btn-news">Read More</a>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Statistics Section -->
    <section id="statistics">
        <div class="container">
            <div class="section-title">
                <h2>Our Impact</h2>
                <p>Tracking our collective progress toward a more sustainable future.</p>
            </div>
            <div class="game-stats" style="justify-content: space-around; margin-top: 40px;">
                <div class="stat-item">
                    <div class="stat-value">12,500+</div>
                    <div class="stat-label">Items Properly Sorted</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value">8,200+</div>
                    <div class="stat-label">Pounds Diverted from Landfills</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value">6,300+</div>
                    <div class="stat-label">Active Community Members</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value">24</div>
                    <div class="stat-label">Events Hosted</div>
                </div>
            </div>
        </div>
    </section>

    <!-- Sustainable Aarhus Map Section -->
    <section id="sustainable-aarhus">
        <div class="container">
            <div class="section-title">
                <h2>Sustainable Aarhus</h2>
                <p>Explore environmentally friendly locations, flea markets, and community spots throughout Aarhus</p>
            </div>
        
            <div class="map-container">
                <div id="map"></div>
                
                <div class="map-legend">
                    <div class="legend-item">
                        <div class="legend-color" style="background-color: #4CAF50;"></div>
                        <span>Flea Markets</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color" style="background-color: #2196F3;"></div>
                        <span>Secondhand Stores</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color" style="background-color: #f44336;"></div>
                        <span>Red Cross Stores</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color" style="background-color: #9C27B0;"></div>
                        <span>Recycling Centers</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color" style="background-color: #FF9800;"></div>
                        <span>Community Gardens</span>
                    </div>
                </div>
                
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="footer-content">
                <div class="footer-column">
                    <h3>Green & social</h3>
                    <p>Making sustainability accessible, engaging, and actionable for everyone.</p>
                    <div class="social-links">
                        <a href="#" class="social-icon">f</a>
                        <a href="#" class="social-icon">in</a>
                        <a href="#" class="social-icon">ig</a>
                    </div>
                </div>
                <div class="footer-column">
                    <h3>Quick Links</h3>
                    <ul>
                        <li><a href="#home">Home</a></li>
                        <li><a href="#events">Events</a></li>
                        <li><a href="game.html">Games</a></li>
                        <li><a href="#news">News</a></li>
                        <li><a href="#statistics">Statistics</a></li>
                    </ul>
                </div>
                <div class="footer-column">
                    <h3>Contact Us</h3>
                    <ul>
                        <li>123 Green Street, Eco City</li>
                        <li>+1 (123) 456-7890</li>
                        <li>info@greensocial.com</li>
                    </ul>
                </div>
            </div>
            <div class="copyright">
                <p>&copy; 2025 Green & social. All rights reserved. | Designed with ‚ôªÔ∏è for a greener planet</p>
            </div>
        </div>
    </footer>
<script>
    // Make map globally accessible
    let map;
    let markers = {};

    // Sustainable locations data - including all the stores you listed
    const sustainableLocations = [
        // Original flea markets
        {
            id: 1,
            name: "Ingerslevs Boulevard Flea Market",
            type: "flea-market",
            address: "Ingerslev Boulevard, Aarhus C",
            description: "One of Aarhus' most popular flea markets with vendors selling everything from vintage clothing, antiques, books, furniture and crafts.",
            hours: "Selected Sundays between April and September, 9:30 AM - 4:00 PM",
            price: "Free",
            lat: 56.1520,
            lng: 10.1989
        },
        {
            id: 2,
            name: "Habengut Market at Godsbanen",
            type: "flea-market",
            address: "Godsbanen, Aarhus C",
            description: "A lively and diverse flea market with a great mix of vintage clothing, retro furniture, crafts, design classics and much more.",
            hours: "Selected weekends, 10:00 AM - 4:00 PM",
            price: "20 DKK (Free for children)",
            lat: 56.1539,
            lng: 10.1992
        },
        {
            id: 3,
            name: "Trunk Market at Bispetorv",
            type: "flea-market",
            address: "Teatergaden 1, 8000 Aarhus C",
            description: "A trunk market located near the cathedral in the center of Aarhus, perfect for finding hidden treasures.",
            hours: "Selected weekends, 10:30 AM - 3:30 PM",
            price: "Free",
            lat: 56.1587,
            lng: 10.2107
        },
        {
            id: 4,
            name: "Loppehuset in H√∏jbjerg",
            type: "flea-market",
            address: "S√∏ren Nymarks Vej 6L, 8270 H√∏jbjerg",
            description: "A hidden gem offering a wealth of used furniture, clothing, books, retro finds and much more.",
            hours: "Selected weekends, 11:00 AM - 2:00 PM",
            price: "Free",
            lat: 56.1155,
            lng: 10.1837
        },
        // Red Cross stores
        {
            id: 5,
            name: "R√∏de Kors Aarhus",
            type: "red-cross",
            address: "Muslingevej 24, 8250 Eg√•",
            description: "Red Cross secondhand store offering quality used items at affordable prices.",
            hours: "Mon-Fri: 10:00 AM - 5:00 PM, Sat: 10:00 AM - 2:00 PM",
            price: "Various",
            lat: 56.1934,
            lng: 10.1362
        },
        {
            id: 6,
            name: "R√∏de Kors H√∏jbjerg",
            type: "red-cross",
            address: "Oddervej 58A, 8270 H√∏jbjerg",
            description: "Red Cross secondhand store in H√∏jbjerg area.",
            hours: "Mon-Fri: 10:00 AM - 5:00 PM, Sat: 10:00 AM - 2:00 PM",
            price: "Various",
            lat: 56.1178,
            lng: 10.1765
        },
        {
            id: 7,
            name: "R√∏de Kors Holme",
            type: "red-cross",
            address: "Holme Byvej 38, 8270 H√∏jbjerg",
            description: "Red Cross secondhand store in Holme area.",
            hours: "Mon-Fri: 10:00 AM - 5:00 PM, Sat: 10:00 AM - 2:00 PM",
            price: "Various",
            lat: 56.1102,
            lng: 10.1893
        },
        // Blue Cross and other stores
        {
            id: 8,
            name: "Blue Cross Op Shop",
            type: "secondhand",
            address: "Paludan-M√ºllers Vej 38, 8200 Aarhus N",
            description: "Blue Cross secondhand store with a good selection of clothing and household items.",
            hours: "Mon-Fri: 10:00 AM - 5:30 PM, Sat: 10:00 AM - 2:00 PM",
            price: "Various",
            lat: 56.1712,
            lng: 10.1754
        },
        {
            id: 9,
            name: "Vintage Divine",
            type: "secondhand",
            address: "Klostergade 58, 8000 Aarhus C",
            description: "Highly rated vintage store with curated selection of clothing and accessories.",
            hours: "Mon-Fri: 11:00 AM - 6:00 PM, Sat: 10:00 AM - 4:00 PM",
            price: "Various",
            lat: 56.1589,
            lng: 10.2087
        },
        {
            id: 10,
            name: "Brugtvare Terminalen",
            type: "secondhand",
            address: "√òlleg√•rdsvej 3, 8000 Aarhus C",
            description: "Large secondhand store with furniture, clothing, and various household items.",
            hours: "Mon-Fri: 10:00 AM - 6:00 PM, Sat: 10:00 AM - 3:00 PM",
            price: "Various",
            lat: 56.1623,
            lng: 10.2015
        },
        {
            id: 11,
            name: "Kirkens Korsh√¶r N√∏rre All√©",
            type: "secondhand",
            address: "N√∏rre Alle 25, 8000 Aarhus C",
            description: "Army Salvation secondhand store in the city center.",
            hours: "Mon-Fri: 10:00 AM - 5:00 PM, Sat: 10:00 AM - 2:00 PM",
            price: "Various",
            lat: 56.1602,
            lng: 10.2034
        },
        {
            id: 12,
            name: "Folkekirkens N√∏dhj√¶lp",
            type: "secondhand",
            address: "Silkeborgvej 285, 8000 Aarhus C",
            description: "DanChurchAid secondhand store supporting humanitarian work.",
            hours: "Mon-Fri: 10:00 AM - 5:00 PM, Sat: 10:00 AM - 2:00 PM",
            price: "Various",
            lat: 56.1689,
            lng: 10.1623
        },
        {
            id: 13,
            name: "Resecond",
            type: "secondhand",
            address: "J√¶gerg√•rdsgade 51, 8000 Aarhus C",
            description: "Secondhand fashion store focusing on quality and style.",
            hours: "Mon-Fri: 11:00 AM - 6:00 PM, Sat: 10:00 AM - 4:00 PM",
            price: "Various",
            lat: 56.1479,
            lng: 10.2073
        },
        {
            id: 14,
            name: "Kirkens Korsh√¶r Aarhus N",
            type: "secondhand",
            address: "Paludan-M√ºllers Vej 26, 8200 Aarhus N",
            description: "Army Salvation secondhand store in Aarhus N.",
            hours: "Mon-Fri: 10:00 AM - 5:00 PM, Sat: 10:00 AM - 2:00 PM",
            price: "Various",
            lat: 56.1710,
            lng: 10.1758
        },
        {
            id: 15,
            name: "Bl√• Kors",
            type: "secondhand",
            address: "Paludan-M√ºllers Vej 38, 8200 Aarhus N",
            description: "Blue Cross secondhand store.",
            hours: "Mon-Fri: 10:00 AM - 5:30 PM, Sat: 10:00 AM - 2:00 PM",
            price: "Various",
            lat: 56.1712,
            lng: 10.1754
        },
        {
            id: 16,
            name: "Kirkens Korsh√¶r Mejlgade",
            type: "secondhand",
            address: "Mejlgade 19, 8000 Aarhus C",
            description: "Army Salvation secondhand store in the Latin Quarter.",
            hours: "Mon-Fri: 10:00 AM - 5:00 PM, Sat: 10:00 AM - 2:00 PM",
            price: "Various",
            lat: 56.1592,
            lng: 10.2098
        },
        {
            id: 17,
            name: "Igen Genbrugsbutik",
            type: "secondhand",
            address: "√Öbogade 36A, 8200 Aarhus N",
            description: "Secondhand store with focus on sustainability and recycling.",
            hours: "Mon-Fri: 10:00 AM - 6:00 PM, Sat: 10:00 AM - 3:00 PM",
            price: "Various",
            lat: 56.1698,
            lng: 10.1789
        },
        {
            id: 18,
            name: "Lille Nor",
            type: "secondhand",
            address: "Frederiks All√© 116, 8000 Aarhus C",
            description: "Small secondhand store with curated selection.",
            hours: "Mon-Fri: 11:00 AM - 6:00 PM, Sat: 10:00 AM - 4:00 PM",
            price: "Various",
            lat: 56.1512,
            lng: 10.1923
        },
        {
            id: 19,
            name: "Reshop Vintage",
            type: "secondhand",
            address: "Hasleg√•rdsvej 8, 8210 Aarhus V",
            description: "Vintage clothing store in Hasle area.",
            hours: "Mon-Fri: 11:00 AM - 6:00 PM, Sat: 10:00 AM - 4:00 PM",
            price: "Various",
            lat: 56.1402,
            lng: 10.1498
        },
        {
            id: 20,
            name: "Folkekirkens N√∏dhj√¶lp Vesterbro",
            type: "secondhand",
            address: "Vesterbro Torv 1A, 8000 Aarhus C",
            description: "DanChurchAid secondhand store at Vesterbro Torv.",
            hours: "Mon-Fri: 10:00 AM - 5:00 PM, Sat: 10:00 AM - 2:00 PM",
            price: "Various",
            lat: 56.1567,
            lng: 10.1923
        },
        {
            id: 21,
            name: "And Vintage",
            type: "secondhand",
            address: "Studsgade 40, 8000 Aarhus C",
            description: "Vintage store with unique finds and retro items.",
            hours: "Mon-Fri: 11:00 AM - 6:00 PM, Sat: 10:00 AM - 4:00 PM",
            price: "Various",
            lat: 56.1598,
            lng: 10.2112
        },
        {
            id: 22,
            name: "R√∏de Kors √Öbyh√∏j",
            type: "red-cross",
            address: "Silkeborgvej 236, 8230 √Öbyh√∏j",
            description: "Red Cross secondhand store in √Öbyh√∏j area.",
            hours: "Mon-Fri: 10:00 AM - 5:00 PM, Sat: 10:00 AM - 2:00 PM",
            price: "Various",
            lat: 56.1389,
            lng: 10.1567
        },
        {
            id: 23,
            name: "Folkekirkens N√∏dhj√¶lp Randersvej",
            type: "secondhand",
            address: "Randersvej 73, 8200 Aarhus N",
            description: "DanChurchAid secondhand store on Randersvej.",
            hours: "Mon-Fri: 10:00 AM - 5:00 PM, Sat: 10:00 AM - 2:00 PM",
            price: "Various",
            lat: 56.1801,
            lng: 10.1892
        },
        {
            id: 24,
            name: "Trojborg Retro & Lopper",
            type: "secondhand",
            address: "Tordenskjoldsgade 63, 8200 Aarhus N",
            description: "Retro and flea market style store in Tr√∏jborg.",
            hours: "Mon-Fri: 11:00 AM - 6:00 PM, Sat: 10:00 AM - 4:00 PM",
            price: "Various",
            lat: 56.1667,
            lng: 10.2015
        },
        {
            id: 25,
            name: "√Örhus Kr√¶mmermarked",
            type: "flea-market",
            address: "Strandparken 27, 8000 Aarhus C",
            description: "Traditional flea market in Aarhus.",
            hours: "Selected weekends, check locally",
            price: "Free entry",
            lat: 56.1502,
            lng: 10.2101
        },
        {
            id: 26,
            name: "R√∏de Kors Brabrand",
            type: "red-cross",
            address: "Edwin Rahrs Vej 32P, 8220 Brabrand",
            description: "Red Cross secondhand store in Brabrand.",
            hours: "Mon-Fri: 10:00 AM - 5:00 PM, Sat: 10:00 AM - 2:00 PM",
            price: "Various",
            lat: 56.1589,
            lng: 10.1298
        },
        {
            id: 27,
            name: "Kirkens Korsh√¶r Vestergade",
            type: "secondhand",
            address: "Vestergade 37, 8000 Aarhus C",
            description: "Army Salvation secondhand store on Vestergade.",
            hours: "Mon-Fri: 10:00 AM - 5:00 PM, Sat: 10:00 AM - 2:00 PM",
            price: "Various",
            lat: 56.1562,
            lng: 10.2034
        },
        // Recycling centers
        {
            id: 28,
            name: "Aarhus Recycling Center",
            type: "recycling",
            address: "Lystrupvej 62, 8200 Aarhus N",
            description: "A facility where you can drop off various types of waste for recycling, including electronics, hazardous waste, and more.",
            hours: "Mon-Fri: 8:00 AM - 6:00 PM, Sat-Sun: 9:00 AM - 4:00 PM",
            price: "Free for most items",
            lat: 56.1896,
            lng: 10.1689
        },
        {
            id: 29,
            name: "Red Cross Recycling Container",
            type: "recycling",
            address: "Bildbjergvej 2, 8200 Aarhus N",
            description: "Red Cross recycling container for clothing and textiles.",
            hours: "24/7",
            price: "Free",
            lat: 56.1734,
            lng: 10.1821
        },
        {
            id: 30,
            name: "Red Cross Genbrugscontainer",
            type: "recycling",
            address: "Fj√¶ldev√¶nget 114, 8210 Aarhus V",
            description: "Red Cross recycling container for clothing and textiles.",
            hours: "24/7",
            price: "Free",
            lat: 56.1423,
            lng: 10.1389
        }
    ];

    // Initialize the map
    function initMap() {
        // Create map centered on Aarhus
        map = L.map('map').setView([56.1629, 10.2039], 12);
        
        // Add OpenStreetMap tiles
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
        }).addTo(map);
        
        // Define marker colors based on type
        const typeColors = {
            'flea-market': '#4CAF50',
            'secondhand': '#2196F3',
            'community': '#FF9800',
            'red-cross': '#f44336',
            'recycling': '#9C27B0'
        };
        
        // Create custom icons
        function createCustomIcon(type) {
            return L.divIcon({
                className: 'custom-marker',
                html: `<div style="background-color: ${typeColors[type]}; width: 20px; height: 20px; border-radius: 50%; border: 3px solid white; box-shadow: 0 2px 5px rgba(0,0,0,0.2);"></div>`,
                iconSize: [20, 20],
                iconAnchor: [10, 10]
            });
        }
        
        // Add markers for each location and store references
        sustainableLocations.forEach(location => {
            const marker = L.marker([location.lat, location.lng], {
                icon: createCustomIcon(location.type)
            }).addTo(map);
            
            // Store marker reference by ID
            markers[location.id] = marker;
            
            // Create popup content
            const popupContent = `
                <div style="max-width: 250px;">
                    <h3 style="margin: 0 0 10px; color: ${typeColors[location.type]};">${location.name}</h3>
                    <p><strong>Address:</strong> ${location.address}</p>
                    <p><strong>Hours:</strong> ${location.hours}</p>
                    <p><strong>Price:</strong> ${location.price}</p>
                    <p>${location.description}</p>
                </div>
            `;
            
            marker.bindPopup(popupContent);
        });
    }

    // Initialize location cards
    function initLocationCards() {
        const locationsList = document.getElementById('locationsList');
        
        sustainableLocations.forEach(location => {
            const card = document.createElement('div');
            card.className = 'location-card';
            
            // Determine type class and display text
            let typeClass = '';
            let typeText = '';
            
            switch(location.type) {
                case 'flea-market':
                    typeClass = 'type-flea-market';
                    typeText = 'Flea Market';
                    break;
                case 'secondhand':
                    typeClass = 'type-secondhand';
                    typeText = 'Secondhand Store';
                    break;
                case 'recycling':
                    typeClass = 'type-recycling';
                    typeText = 'Recycling Center';
                    break;
                case 'community':
                    typeClass = 'type-community';
                    typeText = 'Community Garden';
                    break;
                case 'red-cross':
                    typeClass = 'type-red-cross';
                    typeText = 'Red Cross Store';
                    break;
            }
            
            card.innerHTML = `
                <div class="location-header">
                    <h3 class="location-name">${location.name}</h3>
                    <span class="location-type ${typeClass}">${typeText}</span>
                </div>
                <div class="location-details">
                    <div class="location-detail">
                        <span class="detail-icon">üìç</span>
                        <span>${location.address}</span>
                    </div>
                    <div class="location-detail">
                        <span class="detail-icon">üïí</span>
                        <span>${location.hours}</span>
                    </div>
                    <div class="location-detail">
                        <span class="detail-icon">üí∞</span>
                        <span>${location.price}</span>
                    </div>
                </div>
                <p>${location.description}</p>
                <button class="btn btn-location" onclick="showOnMap(${location.id})">Show on Map</button>
            `;
            
            locationsList.appendChild(card);
        });
    }
    
    // Function to show location on map
    function showOnMap(locationId) {
        const location = sustainableLocations.find(loc => loc.id === locationId);
        const marker = markers[locationId];
        
        if (location && marker) {
            // Center map on the location and zoom in
            map.setView([location.lat, location.lng], 16);
            // Open the popup for that location
            marker.openPopup();
        }
    }

    // Initialize everything when the page loads
    document.addEventListener('DOMContentLoaded', function() {
        // Initialize random participant counts for events
        document.getElementById('gardening-participants').textContent = 
            Math.floor(Math.random() * 10) + 1 + " people signed up";
        document.getElementById('cooking-participants').textContent = 
            Math.floor(Math.random() * 10) + 1 + " people signed up";
        document.getElementById('beach-cleanup-participants').textContent = 
            Math.floor(Math.random() * 10) + 1 + " people signed up";

        // Event sign-up functionality
        const eventButtons = document.querySelectorAll('.event-signup-btn');
        
        // Function to update button states
        function updateEventButtons() {
            const currentUser = JSON.parse(localStorage.getItem('sustainalearn_currentUser'));
            
            eventButtons.forEach(button => {
                const eventName = button.getAttribute('data-event');
                
                if (!currentUser) {
                    // User is not logged in
                    button.textContent = 'Login to Sign Up - Free';
                    button.style.backgroundColor = '#6c757d'; // Gray color
                } else {
                    // User is logged in - check if already signed up
                    const users = JSON.parse(localStorage.getItem('sustainalearn_users')) || [];
                    const user = users.find(u => u.username === currentUser.username);
                    
                    if (user && user.events && user.events.includes(eventName)) {
                        // Already signed up
                        button.textContent = 'Signed Up';
                        button.disabled = true;
                        button.style.backgroundColor = '#6c757d'; // Gray color
                    } else {
                        // Not signed up yet
                        button.textContent = 'Sign Up - Free';
                        button.disabled = false;
                        button.style.backgroundColor = ''; // Reset to original color
                    }
                }
            });
        }
        
        // Add click event listeners
        eventButtons.forEach(button => {
            button.addEventListener('click', function() {
                const eventName = this.getAttribute('data-event');
                const currentUser = JSON.parse(localStorage.getItem('sustainalearn_currentUser'));
                
                if (!currentUser) {
                    // Redirect to login if not logged in
                    alert('Please log in to sign up for events');
                    window.location.href = 'login.html';
                    return;
                }
                
                // Get user data
                const users = JSON.parse(localStorage.getItem('sustainalearn_users')) || [];
                const userIndex = users.findIndex(u => u.username === currentUser.username);
                
                if (userIndex === -1) {
                    alert('User not found. Please log in again.');
                    return;
                }
                
                // Initialize events array if it doesn't exist
                if (!users[userIndex].events) {
                    users[userIndex].events = [];
                }
                
                // Check if user is already signed up
                if (users[userIndex].events.includes(eventName)) {
                    alert('You are already signed up for this event!');
                    return;
                }
                
                // Add event to user's events
                users[userIndex].events.push(eventName);
                
                // Add points for signing up (10 points per event)
                if (!users[userIndex].points) {
                    users[userIndex].points = 0;
                }
                users[userIndex].points += 10;
                
                // Update localStorage
                localStorage.setItem('sustainalearn_users', JSON.stringify(users));
                localStorage.setItem('sustainalearn_currentUser', JSON.stringify(users[userIndex]));
                
                // Update button
                this.textContent = 'Signed Up';
                this.disabled = true;
                this.style.backgroundColor = '#6c757d';
                
                // Update participant count
                const participantElement = document.getElementById(eventName + '-participants');
                const currentCount = parseInt(participantElement.textContent);
                participantElement.textContent = (currentCount + 1) + " people signed up";
                
                alert(`Successfully signed up for the event! You earned 10 points.`);
            });
        });
        
        // Initialize button states
        updateEventButtons();
        
        // Update buttons when auth status changes
        window.updateEventButtons = updateEventButtons;
        
        // Initialize map and location cards
        initMap();
        initLocationCards();
        updateAuthButtons();
    });
</script>
<script>
    // Event data with addresses and times
    const eventData = {
        "gardening": {
            name: "Community Gardening Workshop",
            date: "June 15, 2023",
            time: "10:00 AM - 2:00 PM",
            address: "Aarhus Community Garden, 8000 Aarhus C",
            image: "https://images.unsplash.com/photo-1416879595882-3373a0480b5b?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=2070&q=80",
            participants: Math.floor(Math.random() * 10) + 1
        },
        "cooking": {
            name: "Sustainable Cooking Class", 
            date: "June 22, 2023",
            time: "5:00 PM - 8:00 PM",
            address: "Green Kitchen Aarhus, 8200 Aarhus N",
            image: "https://images.unsplash.com/photo-1556909114-f6e7ad7d3136?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=2070&q=80",
            participants: Math.floor(Math.random() * 10) + 1
        },
        "beach-cleanup": {
            name: "Beach Cleanup & Awareness",
            date: "June 29, 2023",
            time: "9:00 AM - 12:00 PM",
            address: "Aarhus Beach, 8000 Aarhus C",
            image: "https://images.unsplash.com/photo-1581579438747-1dc8d17bbce4?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=2070&q=80",
            participants: Math.floor(Math.random() * 10) + 1
        }
    };

    // Initialize event functionality
    document.addEventListener('DOMContentLoaded', function() {
        // Initialize event cards with addresses and participant counts
        Object.keys(eventData).forEach(eventId => {
            const event = eventData[eventId];
            const eventCard = document.querySelector(`.event-signup-btn[data-event="${eventId}"]`);
            
            if (eventCard) {
                const eventCardContainer = eventCard.closest('.event-card');
                
                // Add address and time to event details if not already present
                if (!eventCardContainer.querySelector('.event-address')) {
                    const eventDetails = eventCardContainer.querySelector('.event-details');
                    const addressElement = document.createElement('div');
                    addressElement.className = 'event-address';
                    addressElement.innerHTML = `
                        <div style="margin-bottom: 10px;">
                            <strong>Time:</strong> ${event.time}
                        </div>
                        <div style="margin-bottom: 15px;">
                            <strong>Location:</strong> ${event.address}
                        </div>
                    `;
                    eventDetails.insertBefore(addressElement, eventDetails.querySelector('.event-signup-info'));
                }
                
                // Create cancel button container after signup info
                const signupInfo = eventCardContainer.querySelector('.event-signup-info');
                if (signupInfo && !eventCardContainer.querySelector('.event-cancel-btn')) {
                    const cancelButton = document.createElement('button');
                    cancelButton.className = 'btn btn-cancel event-cancel-btn';
                    cancelButton.setAttribute('data-event', eventId);
                    cancelButton.textContent = 'Cancel';
                    cancelButton.style.display = 'none';
                    cancelButton.style.marginTop = '5px';
                    cancelButton.style.padding = '6px 12px';
                    cancelButton.style.fontSize = '0.8rem';
                    
                    signupInfo.parentNode.insertBefore(cancelButton, signupInfo.nextSibling);
                }
                
                // Set participant count
                const participantElement = document.getElementById(`${eventId}-participants`);
                if (participantElement) {
                    participantElement.textContent = event.participants + " people signed up";
                }
            }
        });

        // Event sign-up functionality with separate cancel button
        const eventButtons = document.querySelectorAll('.event-signup-btn');
        
        // Function to update button states
        function updateEventButtons() {
            const currentUser = JSON.parse(localStorage.getItem('sustainalearn_currentUser'));
            
            eventButtons.forEach(button => {
                const eventName = button.getAttribute('data-event');
                const cancelButton = document.querySelector(`.event-cancel-btn[data-event="${eventName}"]`);
                
                if (!currentUser) {
                    // User is not logged in
                    button.textContent = 'Login to Sign Up - Free';
                    button.style.backgroundColor = '#6c757d';
                    button.disabled = false;
                    if (cancelButton) cancelButton.style.display = 'none';
                } else {
                    // User is logged in - check if already signed up
                    const users = JSON.parse(localStorage.getItem('sustainalearn_users')) || [];
                    const user = users.find(u => u.username === currentUser.username);
                    
                    if (user && user.events && user.events.includes(eventName)) {
                        // Already signed up - show "Signed Up" and show cancel button
                        button.textContent = 'Signed Up';
                        button.disabled = true;
                        button.style.backgroundColor = '#6c757d';
                        if (cancelButton) cancelButton.style.display = 'inline-block';
                    } else {
                        // Not signed up yet
                        button.textContent = 'Sign Up - Free';
                        button.disabled = false;
                        button.style.backgroundColor = '';
                        if (cancelButton) cancelButton.style.display = 'none';
                    }
                }
            });
        }
        
        // Add click event listeners for sign up
        eventButtons.forEach(button => {
            button.addEventListener('click', function() {
                const eventName = this.getAttribute('data-event');
                const currentUser = JSON.parse(localStorage.getItem('sustainalearn_currentUser'));
                
                if (!currentUser) {
                    window.location.href = 'login.html';
                    return;
                }
                
                const users = JSON.parse(localStorage.getItem('sustainalearn_users')) || [];
                const userIndex = users.findIndex(u => u.username === currentUser.username);
                
                if (userIndex === -1) {
                    return;
                }
                
                if (!users[userIndex].events) {
                    users[userIndex].events = [];
                }
                
                // Check if already signed up to prevent duplicates
                if (users[userIndex].events.includes(eventName)) {
                    return;
                }
                
                // Sign up for event
                users[userIndex].events.push(eventName);
                
                // Add 10 points for signing up
                if (!users[userIndex].points) {
                    users[userIndex].points = 0;
                }
                users[userIndex].points += 10;
                
                localStorage.setItem('sustainalearn_users', JSON.stringify(users));
                localStorage.setItem('sustainalearn_currentUser', JSON.stringify(users[userIndex]));
                
                const participantElement = document.getElementById(eventName + '-participants');
                if (participantElement) {
                    const currentCount = parseInt(participantElement.textContent) || 0;
                    participantElement.textContent = (currentCount + 1) + " people signed up";
                }
                
                updateEventButtons();
            });
        });
        
        // Add click event listeners for cancellation
        document.addEventListener('click', function(e) {
            if (e.target.classList.contains('event-cancel-btn')) {
                const eventName = e.target.getAttribute('data-event');
                const currentUser = JSON.parse(localStorage.getItem('sustainalearn_currentUser'));
                
                if (!currentUser) {
                    return;
                }
                
                const users = JSON.parse(localStorage.getItem('sustainalearn_users')) || [];
                const userIndex = users.findIndex(u => u.username === currentUser.username);
                
                if (userIndex === -1) {
                    return;
                }
                
                if (!users[userIndex].events) {
                    users[userIndex].events = [];
                    return;
                }
                
                // Remove the event from user's events
                const eventIndex = users[userIndex].events.indexOf(eventName);
                if (eventIndex > -1) {
                    users[userIndex].events.splice(eventIndex, 1);
                    
                    // Remove 10 points (the sign-up points)
                    if (users[userIndex].points && users[userIndex].points >= 10) {
                        users[userIndex].points -= 10;
                    }
                    
                    localStorage.setItem('sustainalearn_users', JSON.stringify(users));
                    localStorage.setItem('sustainalearn_currentUser', JSON.stringify(users[userIndex]));
                    
                    const participantElement = document.getElementById(eventName + '-participants');
                    if (participantElement) {
                        const currentCount = parseInt(participantElement.textContent) || 0;
                        participantElement.textContent = Math.max(0, currentCount - 1) + " people signed up";
                    }
                    
                    updateEventButtons();
                }
            }
        });
        
        // Initialize button states
        updateEventButtons();
        window.updateEventButtons = updateEventButtons;
    });
</script>
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
</body>
</html>